<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="Generic">

  <!--
    Generic SQL Maps cho các queries thường dùng
    Giúp bạn test nhanh mà không cần tạo model cụ thể
  -->

  <!-- Get all records from any table -->
  <select id="Generic.GetAllFromTable" resultType="System.Object">
    -- NOTE: Không thể dùng parameter cho table name trong SQL Map
    -- Query này là ví dụ - cần chạy dynamic query từ code
    SELECT TOP 100 * FROM Applications
  </select>

  <!-- Count records in a table -->
  <select id="Generic.CountRecords" resultType="System.Int32">
    SELECT COUNT(*) FROM Applications
  </select>

  <!-- Get table info -->
  <select id="Generic.GetTableColumns">
    SELECT
      COLUMN_NAME,
      DATA_TYPE,
      IS_NULLABLE,
      CHARACTER_MAXIMUM_LENGTH
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE TABLE_NAME = @TableName
    ORDER BY ORDINAL_POSITION
  </select>

  <!-- Search across common text fields -->
  <select id="Generic.SearchApplications">
    SELECT TOP 50 *
    FROM Applications
    WHERE ApplicationName LIKE @SearchTerm
       OR Description LIKE @SearchTerm
  </select>

  <!-- Get recent records -->
  <select id="Generic.GetRecentRecords">
    SELECT TOP 20 *
    FROM Applications
    WHERE CreatedDate >= @SinceDate
    ORDER BY CreatedDate DESC
  </select>

</sqlMap>
